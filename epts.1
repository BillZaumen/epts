.TH EPTS "1" "May 2018" "epts VERSION" "User Commands"
.SH NAME
epts \- create points and Bezier curves/splines
.SH SYNOPTSIS
.B epts
[\fI\,SCROPTION\/\fR]...
[\fI\,EFILE\/\fR]
.br
.B epts
[\fI\,SCROPTION\/\fR]...
.B \-\-image
.I IFILE
.br
.SH DESCRIPTION
EPTS (Edit PoinTS) is a special-purpose graphics editor. Its purpose
is to make it easy to take a background, typically an image, overlay a
series of points or curves on top of it, and then scale and/or
translate the positions of the points and curves so that the locations
of the points or control points are expressed in a specific coordinate
system.
.PP
With no arguments, EPTS assumes the background is an image and will
ask the user for an image file. For commands that specify an image
file
.I IFILE
explicitly, that file will be used as the background.  For commands
that specify an EPTS file
.I EFILE
explicitly, the state of a previously saved session will be restored.
In this case, the current working directory will be set to the
directory containing the file
.IR EFILE .
.SH OPTIONS
.PP
There are two types of options. An option referred to as
.I SCROPTION
in the synopsis is an option that is also used by the
.B scrunner
command. Such options can be used to configure the java virtual machine,
to add additional java archives to the class path, to define or change
various system properties, etc.  The remaining options are the
following:
.TP
.B \-\-
End of options.
.TP
.B \-\-elevate
This flag applies when the
.B \-\-pname
option is used and is ignored otherwise. It will increase the
degree of linear and quadratic Bezier-path segments so that
all segments are cubic segments.
.TP
.BI \-\-fill\  COLOR
This option sets the
.B fill
attribute to
.I COLOR
in an SVG path. It applies to a path specified by the next
.B \-\-pname
option. The value of
.I COLOR
can be any color specification accepted by SVG (the same as those
defined by the CSS2 specification). A value of
.B none
indicates that no color is specified and the path will not be filled.
.TP
.BI \-\-fill-rule\  RULE
This option sets the
.B fill-rull
attribute to
.I RULE
in an SVG path. It applies to a path specified by the next
.B \-\-pname
option.
.I RULE
may be the constants
.B nonzero
or
.BR evenodd .
.TP
.BI \-\-flatness\  FLATNESS
This option applies when the
.B \-\-pname
option is used and is ignored otherwise, but must jnot be used with
the
.B \-\-svg
option. When
.I FLATNESS
is zero, the
.B \-\-limit
option determines the number of times a segment will be partitioned. Otherwise
control points must deviate from a straight line along each segment
by at most the value of
.IR FLATNESS ,
which must not be a negative number.
.TP
.B \-\-gcs
This flag applies when the
.B \-\-pname
option is used and is ignored otherwise, but may not be used with the
.B \-\-svg
option. When set, the coordinates of the path's control points will be
expressed in GCS (Graph Coordinate Space) units.  Otherwise the
control points are given in Java user-space units, where distances are
in points and where the origin is at the upper-left corner of the
image or frame, with the positive X axis pointing right and the
positive Y axis pointing down. In GCS units, by constrast, the X axis
points right, the Y axis points down, and the scale is user-defined,
with the origin placed anywhere on or off the image or frame as
desired.
.TP
.B \-\-image
The first and only argument that is not an option is the name of an
image file.
.TP
.BI \-\-limit\  LIMIT
This flag applies when the
.B \-\-pname
option is used and is ignored otherwise. This parameter limits the
amount of recursion used when paths are split to meet a flatness
criteria. When
.I LIMIT
is zero, paths will not be partitioned.
.TP
.BI \-\-map\  MAPFILE
The file
.I MAPFILE
must contain a series of lines, each starting with the token
.BR MOVE_TO ,
.BR SPLINE ,
.BR CONTROL ,
.BR SEG_END ,
or
.BR CLOSE .
A replacement for the token, separated from the token by whitespace,
continues to the end of the line. Any whitespace surrounding the
replacement is removed. The mapping can be used to print the types
of points along a path using a custom string instead of the defaults,
which are based on enumeration constants. The map will set the value
of a key whose name is
.B atype
for use by template processors.
.TP
.BI \-o\  OUTFILE
This option specifies the output file for template processing, and
if missing template-processing will not occur. If the value of
.I OUTFILE
is
.B \-
then standard output is used.  Template processing requires that
a template be specified with the
.B \-\-template
option and one may optionally provide a map using the
.B \-\-map
option when the
.B \-\-pname
option is not used. When the
.B \-o
option is used, EPTS operates in batch mode, and its input file should
be an EPTS file (one with the file extension "epts"). EPTS files are
created by EPTS when its "Save" menu item is used.
.TP
.BI \-\-pname\  PNAME
This option's argument
.I PNAME
provides the name of a variable that names a path.  When this option is
provided, an alternative key map is used for template processing as
described by the manual page
.BR epts (5)
and by the manual for
.BR epts .
This keymap describes a path as a series of straight-line segments,
quadratic Bezier curves, or cubic Bezier curves. Segments starting or
terminating with a spline point are converted to cubic Bezier curves.
When the
.B \-\-svg
option is used,
.I PNAME
may consist of an identifier, immediately followed by a ":", in turn
followed by a series of comma-separated path names.  This in effect
creates a path with a new name that is a concatenation of paths specified
in EPTS's table. The main use of this variant is to create shapes that
may have holes in them. The attributes
.BR \-\-fill ,
.BR \-\-fillRule ,
.BR \-\-stroke ,
and
.B \-\-stroke-width
that are used are the ones between the current
.B \-\-pname
option and any preceding
.B \-\-pname
option, or the start of the command if there is no preceding
.B \-\-pname
option. After a
.B \-\-pname
these fill and stroke options are reset to their defaults for use
by following
.B \-\-pname
options.
.TP
.BI \-\-port\  PORT
When
.I PORT
is zero (the default) and the user requests to view the manual using
a browser, an embedded web server will be started and a browser window
will be brought up.  The web server will use a system-allocated port
number.  If
.I PORT
is not zero, an embedded web server will be started and configured so
that the file manual.html is available. The URL for this file will be
<http://\fIHOST\fR:\fIPORT\fR/manual.html>, where
.I HOST
is the host name (or IP address) of the system on which EPTS is running.
Valid port numbers range from 1 to 65535 inclusive, although many are
reserved for other purposes or require system privileges.
.TP
.B \-\-straight
This flag applies when the
.B \-\-pname
option is used and is ignored otherwise. When set, the path will be
flattened and converted to straight-line segments.
.TP
.BI \-\-stroke\  COLOR
This option sets the
.B stroke
attribute to
.I COLOR
in an SVG path. It applies to a path specified by the next
.B \-\-pname
option. The value of
.I COLOR
can be any color specification accepted by SVG (the same as those
defined by the CSS2 specification). A value of
.B none
indicates that no color is specified and the path will not be drawn.
.TP
.BI \-\-stroke-width\  WIDTH
This option sets the
.B stroke-width
attribute to
.I WIDTH
in an SVG path. It applies to a path specified by the next
.B \-\-pname
option. The value of
.I WIDTH
is any width acceptable to SVG: a number possibly followed by a unit
or a '%' symbol.
.TP
.B \-\-svg
This option, if present, must precede all
.B \-\-pname
options.  It indicates that the output will be an SVG (Scaleable
Vector Graphics) file.  The
.BR \-\-template ,
.BR \-\-flatness ,
.BR \-\-straigth ,
and/or
.B \-\-elevate
options must not be used with this option.
.TP
.BI \-\-template\  TFILE
The output will be formated based on a template provided by the
file or URL
.IR TFILE .
The format of the template file depends on whether or not the
.B \-\-pname
flag has been set: when set, a path-iterator template must be used;
otherwise a table template must be used. There are a number of
built-in templates whose URLs start with the protocol "sresource"
For table templates, these are <sresource:ECMAScriptLayers.tpl>,
<sresource:EMCAScriptLocations.tpl>, <sresource:EMCAScriptPaths.tpl>,
and <sresource:ECMAScript.tpl>, where "<" and ">" as usual are not
part of the URLs. For path-iterator templates, the URL is
<sresource:SegmentsCSV.tpl>.
.TP
.B \-\-web
This option indicates that a web server will be started and the GUI will
be ignored.  The web server will provide access to the on-line manual.
The
.B \-\-port
option should be used as well and should set the port number to a non-zero
value.
.SH SCRUNNER OPTIONS
.PP
Most of the options EPTS supports are ones that are shared with the
program
.BR scrunner .
Unless an exceedingly large image file is used or a custom image
format has to be supported, these are generally not needed when the
background is an image.  The
.B scrunner
options that are supported are:
.TP
.BI \-\-codebase\  URLPATH
Defines directories and jar files to a class path.
.I URLPATH
may be a URL giving the location of the classes or a path name in the
local file system.  The character "|" is used as a path separator, with
the sequence "||" interpreted as a literal "|", so that for an odd number
of "|" characters in a row, only the final one is treated as a path separator.
If file name must start with "|", use a "file" URL and encode the "|" as
%7C.
If the starting sequence of a path component contains a ":" (the first one if
there are more than one), and that sequence of characters is syntactically
valid at the start of a URL, the path component is treated as a URL. Otherwise
it is a file name.  This rule implies that Windows file names such as
C:mycode.jar will be confused with a URL, so a URL should be used instead.
If a file name is not absolute, it is interpreted
relative to the current working directory. Multiple codebase options may be
provided (to improve readability).
Multiple
.B \-\-codebase
options are allowed. For file names, a leading "~" followed by the
name separator ("/" for Unix) is expanded to the user\'s home
directory, a file name consisting of only "~" is replaced with the
user\'s home directory, a leading "~~" is replaced with "~", and a
leading "..." followed by the name separator ("/" for Unix) is
replaced by the directory in which the BZDev class library's JAR file
is located.
.TP
.BI \-D NAME\fB=\fIVALUE
Define the name of a Java property and give it a value.  See the java
command for details.  The syntax for this argument is the same as that
defined for the similarly named option for the
.B java
command.  The properties "java.system.class.loader", "java.security.manager",
"scrunner.sysconf", and "scrunner.usrconf" cannot be altered by this
option (or the corresponding
.B \-J
option).  If those must be changed, add a
.B \-D
option before the
.B \-jar
option in the
.B scrunner
shell script (or alternatively, create a new script).
.TP
.B \-\-dryrun
Prints the java command that would be executed but does not actually
execute it.
.BI \-J \-JOPTION
Causes a single-argument option
.I \-JOPTION
to be used by the java launcher that
.B epts
invokes.
.TP
.BI \-L\  LANGUAGE
Specifies the scripting language
.I LANGUAGE
 in use.
.SH FILES
.TP
.I /etc/bzdev/scrunner.conf\ \fRor\fI\ /etc/opt/bzdev/scrunner.conf
System configuration file that allows a specific Java launcher, class-path
entries, and property definitions to be used. The form starting with
/etc/opt may be used on some systems (e.g. Solaris).
.TP
.I ~/.config/bzdev/scrunner.conf
User configuration file that allows a specific Java launcher, class-path
entries, and property definitions to be used.  property definitions in this
file override those in the system configuration file.
.SH SEE ALSO
.BR scrunner (1)
.br
.BR scrunner.conf (5)
.br
.BR epts (5)

\"  LocalWords:  EPTS epts Bezier SYNOPTSIS fI SCROPTION fR EFILE br
\"  LocalWords:  IFILE PoinTS scrunner TP html MAPFILE SEG whitespace
\"  LocalWords:  atype TFILE formated OUTFILE codebase URLPATH fB
\"  LocalWords:  fIVALUE sysconf usrconf dryrun JOPTION fRor Solaris
\"  LocalWords:  config conf
